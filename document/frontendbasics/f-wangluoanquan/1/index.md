# 网络请求相关问题汇总

## 2. 介绍 HTTPS 握手过程

- 客户端请求服务器，并告诉服务器自身支持的加密算法以及密钥长度等信息
- 服务器响应公钥和服务器证书
- 客户端验证证书是否合法，然后生成一个会话密钥，并用服务器的公钥加密密钥，把加密的结果通过请求发送给服务器
- 服务器使用私钥解密被加密的会话密钥并保存起来，然后使用会话密钥加密消息响应给客户端，表示自己已经准备就绪
- 客户端使用会话密钥解密消息，知道了服务器已经准备就绪。
- 后续客户端和服务器使用会话密钥加密信息传递消息

## 3. HTTPS 握手过程中，客户端如何验证证书的合法性

- 校验证书的颁发机构是否受客户端信任。
- 通过 CRL 或 OCSP 的方式校验证书是否被吊销。
- 对比系统时间，校验证书是否在有效期内。
- 通过校验对方是否存在证书的私钥，判断证书的网站域名是否与证书颁发的域名一致。

## 4.XHR、SSE、WS交互区别
1. xhr请求完成后就会断开连接；
2. sse建立连接后，不手动断开就会一直处于连接状态，只能服务端推送消息到前端；
3. ws建立后，不手动断开就会一直处于连接状态，前后端可以互相推送消息；

## 5.说下单点登录

SSO 一般都需要一个独立的认证中心（passport），子系统的登录均得通过 passport，子系统本身将不参与登录操作，当一个系统成功登录以后，passport 将会颁发一个令牌给各个子系统，子系统可以拿着令牌会获取各自的受保护资源，为了减少频繁认证，各个子系统在被 passport 授权以后，会建立一个局部会话，在一定时间内可以无需再次向 passport 发起认证。
具体流程是：

用户访问系统 1 的受保护资源，系统 1 发现用户未登录，跳转至 sso 认证中心，并将自己的地址作为参数
sso 认证中心发现用户未登录，将用户引导至登录页面
用户输入用户名密码提交登录申请
sso 认证中心校验用户信息，创建用户与 sso 认证中心之间的会话，称为全局会话，同时创建授权令牌
sso 认证中心带着令牌跳转会最初的请求地址（系统 1）
系统 1 拿到令牌，去 sso 认证中心校验令牌是否有效
sso 认证中心校验令牌，返回有效，注册系统 1
系统 1 使用该令牌创建与用户的会话，称为局部会话，返回受保护资源
用户访问系统 2 的受保护资源
系统 2 发现用户未登录，跳转至 sso 认证中心，并将自己的地址作为参数
sso 认证中心发现用户已登录，跳转回系统 2 的地址，并附上令牌
系统 2 拿到令牌，去 sso 认证中心校验令牌是否有效
sso 认证中心校验令牌，返回有效，注册系统 2
系统 2 使用该令牌创建与用户的局部会话，返回受保护资源


## 6.介绍下如何实现 token 加密 jwt

以最常见的 token 格式 jwt 为例, token 分为三段，分别是 `header`、`payload`、`signature`。 其中:

+ `header` 标识签名算法和令牌类型；
+ `payload` 标识主体信息，包含令牌过期时间、发布时间、发行者、主体内容等；
+ `signature` 是使用特定的算法对前面两部分进行加密，得到的加密结果。

`token` 有`防篡改`的特点:
如果攻击者`改动了前面两个部分`，就会导致`和第三部分对应不上`，使得 `token 失效`。
而攻击者不知道加密秘钥，因此又无法修改第三部分的值。

所以，在秘钥不被泄露的前提下，一个验证通过的 `token` 是值得被信任的。

## 7. HTTP的状态码有哪些？

### HTTP 状态码分类

- **1xx 信息性状态码**：表示请求已被接受，需要继续处理。
- **2xx 成功状态码**：表示请求已成功被服务器接收、理解并接受。
- **3xx 重定向状态码**：表示需要客户端采取进一步的操作才能完成请求。
- **4xx 客户端错误状态码**：表示客户端发送的请求有错误。
- **5xx 服务器错误状态码**：表示服务器在处理请求时发生了错误。

### 常用 HTTP 状态码列表
- **100 Continue**： 当客户端发送 `POST`（其他方式不会返回 100） 请求时，通常会先发送请求头，然后再发送请求体。如果服务器在收到请求头后认为可以继续处理请求，就会返回 100 Continue 状态码，表示客户端可以继续发送请求体。100 Continue 状态码并不是必需的，服务器可以选择不返回它。
- ⚠️**200 OK**：表示请求成功，服务器已成功处理请求并返回相应的内容。
- **201 Created**：表示请求已经被成功处理，并且创建了新的资源。
- **202 Accepted**： 服务器已接受请求，但尚未处理。
- **204 No Content**：表示服务器成功处理了请求，但不需要返回任何实体内容。
- **301 Moved Permanently**：表示请求的资源已被`永久移动`到新的 URL，浏览器会自动重定向到新的 URL。
- ⚠️**302 Found**：表示请求的资源`临时移动`到新的 URL，浏览器会自动重定向到新的 URL。
- **303 See Other**: 临时性重定向，表示请求的资源已被分配了新的 URI，客户端应使用 GET 方法获取新的资源。
- ⚠️**304 Not Modified**：表示客户端发送附带条件的请求时，服务器端允许请求访问资源，但未满足条件的情况。`（Last-Modified 或 ETag 协商缓存）`
- **400 Bad Request**：表示客户端请求的语法错误，服务器无法理解。
- **401 Unauthorized**：表示请求要求用户的身份认证。
- ⚠️**403 Forbidden**：表示服务器理解请求客户端的请求，但是拒绝执行此请求。
- ⚠️**404 Not Found**：表示服务器无法根据客户端的请求找到资源。
- **405 Method Not Allowed**： 服务器接收到了客户端的请求，但请求方法不被允许。
- **406 Not Acceptable**：服务器无法根据客户端的请求头中的 Accept 字段提供相应的内容。
- ⚠️**500 Internal Server Error**：表示服务器内部错误，无法完成请求。
- **502 Bad Gateway**：表示作为网关或者代理工作的服务器尝试执行请求时，从远程服务器接收到了一个无效的响应。
- **503 Service Unavailable**：表示由于超载或系统维护，服务器暂时的无法处理客户端的请求。
- **504 Gateway Timeout**：服务器作为网关或代理，在等待上游服务器响应时超时。这意味着服务器在规定的时间内没有收到来自上游服务器的完整响应。


## HTTPS是如何实现加密？

## 全双工通信协议 websocket
