---
title: 7. 本地调试npm包操作流程
order: 7
---
# 7. 本地调试npm包操作流程

在开发过程中，有时我们需要对依赖的npm包进行定制化修改或调试。为了实现这一目标，而又无需频繁发布新版本以验证更改，我们可以利用`npm link`命令在本地搭建调试环境。本教程将指导您完成从克隆源码到在项目中使用链接包的完整流程。


### 将当前项目链接到全局

#### 1. 获取源代码：

编写或者下载要调试npm包的源代码。

#### 2. 进入包目录

打开终端，导航至该npm包的根目录。

#### 3. 构建或编译

根据包的性质，可能需要运行`npm install`（或`yarn`、`pnpm install`）来安装其依赖项，以及`npm run build`（或相应的构建脚本）来编译源代码。

#### 4. 创建全局符号链接

在包目录下执行`npm link`命令。这会在全局npm模块目录中创建一个符号链接，指向当前包的`node_modules/.bin`目录及其主入口文件。此时，包已准备好被其他本地项目链接。

### 在项目中使用链接的包

#### 1. 进入项目目录

切换到您希望使用此调试版npm包的项目根目录。

#### 2. 链接包

在项目中执行`npm link <package-name>`，其中`<package-name>`应替换为实际的npm包名称（通常与`package.json`中的`name`字段一致）。这会在项目的`node_modules`目录下创建一个符号链接，指向先前在全局创建的包链接，从而将项目与本地开发的npm包源码建立关联。

### 开始调试

#### 1. 修改与测试

现在，您可以直接在npm包源码中进行修改。这些改动会立即反映到依赖它的项目中，无需重新安装或更新包版本。运行项目，观察并调试包的行为。

#### 2. 清理

当调试工作完成，要恢复到使用正式发布的npm包时，只需在项目目录中执行`npm uninstall <package-name>`（或`npm unlink <package-name>`）以移除本地链接，然后使用常规的`npm install <package-name>`重新安装官方版本。

通过上述步骤，您就能在本地高效地调试npm包，无需频繁发布新版本以验证更改。
