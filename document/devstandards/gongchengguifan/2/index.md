# 2. Git message 书写规范

## 前言

为什么要对 Git 提交日志（以下简称 log）的格式进行规范约束？

1. 最重要的原因 自然是：便于人类程序员对提交历史进行追溯，了解发生了什么情况。因此像「update」甚至于「u」这样的 log，都是不合格的写法，想必诸如此类的 log 已经被大家咒骂过一遍遍。
2. 另外，一旦约束了提交日志，意味着我们将慎重地进行每一次提交，不能再一股脑儿地把各种各样的改动都放到一个提交里面，这样一来，整个代码改动的历史也将更加清晰。
3. 想得更远一点，格式化的 log 才可能用于自动化输出 changelog。

对 Git 提交日志进行格式约束是否带来较高的执行成本？

1. 所谓仓廪实而知礼节，随着大型共建项目 / 开源项目的增多，必然要用更专业化的态度去面对。规范化的 Git log 正是其中一环。
2. 最后，如果实在无法完美遵循日志规范，最最重要的原则是：至少要保证在整个项目中 log 格式的一致性！不要做一个朝秦暮楚的人。


## 基本的 log 格式
```javascript
<type>(<scope>): <subject>
<空行>
<body>
<空行>
<footer>
```
其中需要注意的是，log header 即首行部分必需，而 body 和 footer 部分可选。

`<subject>`, `<body>`, `<footer>` 内容默认使用中文。
## log header

### type

提交类型 type 用来描述一次提交行为的改动方向。

type 的可选值如下。注意：Git log 的 type 和 changelog 的 type 存在紧密联系；然而它们两者之间并非一一对应，比如在 changelog 中一般不会指出文档 docs 或测试用例 test 等方面发生的变化。

- feat: 新增功能。
- fix: 修复 bug。
- docs: 文档相关的改动。
- style: 对代码的格式化改动，代码逻辑并未产生任何变化。
- test: 新增或修改测试用例。
- refactor: 重构代码或其他优化举措。
- chore: 项目工程方面的改动，代码逻辑并未产生任何变化。

### scope

改动范围 scope 用来描述一次提交行为涉及到的模块 / 功能 / 或是其他任何限定的范围。

scope 的具体取值视项目而定。以淘宝详情页为例，取值可以是：header, footer, favorite, sku, etc, ...

### subject

主题 subject 用来概括一次提交行为囊括的内容。

1. 时态方面使用一般现在时，不要用过去时态。虽然查看 log 时，log 内容本身都发生在过去，然而对于主题来说，使用现在时的时态更简洁明确，并且更易达成一致性。
2. 句式使用祈使句式。即一般情况不要增加主语。因为在绝大情况下，主语都是作者「我」。
3. 句尾无需结束标点；如果使用英语，则句首同样无需大写。同样是因为主题（或称标题）本身不用形成完整的句子。

示例：
```javascript
// good
docs: 删除冗余文档

// bad
docs: 我删除了冗余文档
```
## log body

日志的内容主体 body 用来描述详细的提交内容，可写可不写。

1. 时态方面使用一般现在时，不要用过去时态。
2. 句式视情况而定，一般使用祈使句式。
3. 标点方面遵循一般的文档格式规范。


## log footer

日志的内容页脚 footer 用来描述一些补充信息，可写可不写。


注明修复的问题。使用 `Closes` 关键字，后面跟上（Gitlab / Redmine 或其他平台的）issue ID。

```javascript
Closes #120

Closes #35, #38, #49
```

