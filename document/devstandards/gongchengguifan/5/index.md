# 5. 语义化版本化

## 版本号的命名

根据国际主流的惯例，我们使用「语义化版本（[Semantic Versioning](http://semver.org/)）」的命名方式，有时简称 SemVer。

语义化版本号（以下简称「版本号」）的格式是：<major>.<minor>.<patch>。即使用三位非负整数，
以点号 . 连接。如：1.4.15、6.2.0。


## 每一位版本号的含义

1. <major> 即主版本号，俗称大版本升级。改动到主版本号时，标志着 API 发生了巨大变化，包括但不限于新增特性、修改机制、删除功能， 一般不兼容上一个主版本号。
2. <minor> 即次版本号，俗称小版本升级。当我们进行常规的新增或修改功能时，改动次版本号，但是 必须是向前兼容的。这也意味着我们 不能直接删除某个功能。如若必要，我们可以在 changelog 中标记某项功能为「即将删除（Deprecated）」，然后在下一个大版本中将其彻底删除。
3. <patch> 即修订号，俗称 bug 修复。顾名思义，如果仅仅为了修复或调整一些小问题，我们就只改动修订号。
所以，当我们明确了每一位的含义和作用后，就不会陷入「每次只改最末位」的尴尬中了。

那如何判断一个修改应该是改动修订号还是次版本号呢？视情况而定。比如对于「修改了 app 图标」这件事来说，如果只是调整了图标的间距位置，那么可以认作问题修复；如果把整个图标换了，配上了不同的标语，那么这应该是一次功能改动。


## 注意事项

1. 版本号前不要加 v。
2. 不要在数字前补 0。错误示例：01.12.03。
3. 每一位版本号按照 +1 的速度递增，不要在版本号之间跳跃。
4. 主版本号停留在 0 的版本号，即 0.x.x 应当视作还在内部开发阶段的代码。如果代码有公共 API，此时不宜对外公开。
5. 1.0.0 的版本号用于界定公共 API 的形成。
6. 当次版本号递增时，修订号归零；当主版本号递增时，次版本号、修订号归零。
7. 进行新的开发时，版本号从 0.1.0 开始。
8. 如果不小心把一个不兼容的改版当成了次版本号发行，应当发行一个新的次版本号来更正这个问题并且恢复向下兼容。注意 不能去修改已发行的版本。


## 快速修改版本号

如果一个包发布在 NPM / TNPM 中，可以快速修改其版本号。会自动触发一个 git 提交。

```
# 递增一个修订号
npm version patch
# 递增一个次版本号
npm version minor
# 递增一个主版本号
npm version major
```



