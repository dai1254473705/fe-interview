# 11. 图片规范

## 常见图片格式

> 常见图片格式有 GIF、PNG（包括 PNG8、PNG24）、JPEG、WEBP。

### **GIF**

最多 256 色，可动画及交互，压缩好但不适合真彩色。

### **PNG**

替代 GIF 和 TIFF，支持高深度图像、Alpha 通道等，无损压缩，适合网络传输。PNG8 色位低，PNG24 压缩率低体积大。

### **JPEG**
针对照片视频有损压缩，适 24 位全采影像，高压缩比易失真。

### **WEBP**
谷歌开发，有损无损压缩，体积小，兼容性差。

### 约定：
#### 内容图

> 内容图多以商品图等照片类图片形式存在，颜色较为丰富，文件体积较大

`内容图`优先 `JPEG`，条件允许用 `WEBP`，尽量`不用 PNG`,PNG8 色位太低，PNG24 压缩率低，文件体积大。

#### 背景图

> 背景图多为图标等颜色比较简单、文件体积不大、起修饰作用的图片

- PNG 与 GIF 格式，优先考虑使用 PNG 格式,PNG格式允许更多的颜色并提供更好的压缩率
- 图像颜色比较简单的，如纯色块线条图标，优先考虑使用 PNG8 格式，避免不使用 JPEG 格式
- 图像颜色丰富而且图片文件不太大的（40KB 以下）或有半透明效果的优先考虑 PNG24 格式
- 图像颜色丰富而且文件比较大的（40KB - 200KB）优先考虑 JPEG 格式
- 条件允许的，优先考虑 WebP 代替 PNG 和 JPEG 格式


## 图片大小

中国普通家庭的宽带基本能达到8Mbps，实际速率大约为500—900KB/s，全国3G/4G用户占有比超过了50%。

### PC平台
单张的图片的大小不应大于 200KB。

### 移动平台
单张的图片的大小不应大于 100KB。

## 图片质量

- 上线的图片都应该`经过压缩处理`，压缩后的图片`不应该出现肉眼可感知的失真区域`;
- `60质量的JPEG`格式图片与质量大于60的相比，`肉眼已看不出明显的区别`，因此保存 JPEG 图的时候，质量一般`控制在60`，若保真度`要求高的`图片可适量`提高到 80`，图片大小控制在 200KB 以内。

## 图片引入

HTML 中图片引入不需添加 width、height 属性，alt 属性应该写上

**推荐：**
```html
<img src="" alt="" >
```

**不推荐：**
```html
<img src="" width="" height="" >
```

**CSS 中图片引入不需要引号**
```html
.img {
    background-image: url(pic.png);
}
```

## CSS Sprites VS Data URIs

### CSS Sprites特点
- 减少请求数
- 加速图片的显示
- 维护更新成本大
- 更多的内存消耗，特别是大体积或有过多空白的 Sprites 图
- 图片渗漏，相邻的不需展示的图片有可能出现在展示元素中，特别是在高清设备移动设备上

### Data URIs（base64编码）
- 减少请求数
- 转换文件体积大，大约比原始的二进制大33%
IE6 / IE7 不支持
- 图片显示相对较慢，需要更多的CPU消耗

### CSS Sprites 使用建议
- 适合使用频率高更新频率低的小图标
- 尽量不留太多的空白
- 体积较大的图片不合并
- 确保要合并的小图坐标数值和合并后的 Sprites 图尺寸均为偶数

### Data URIs（base64编码）使用建议
- 适合更新频率高的小图片，如某些具备自定义功能的标题icon等
- 转换成 Base64 编码的图片应小于 2KB
- 移动端不使用 Base64 编码
- 要兼容 IE6/IE7 的不使用
